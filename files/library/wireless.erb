config wifi-device 'radio0'
  option type 'mac80211'
  option hwmode '<%= @node.fetch('wifi_hwmode') %>'
  option distance '1000'
<%# detect nil -> src https://softwareengineering.stackexchange.com/questions/302530/ruby-if-variable-vs-if-variable-nil -%>
<% if ! @node['wifi_path'].nil? -%>
  option path '<%= @node.fetch('wifi_path') %>'
<% end -%>
  option htmode '<%= @node.fetch('wifi_htmode') %>'
  option channel '<%= @node.fetch('wifi_channel') %>'
  option country '<%= @node.fetch('wifi_country') %>'
  option txpower '<%= @node.fetch('wifi_txpower') %>'

config wifi-iface 'default_radio0'
  option device 'radio0'
  option encryption 'none'
  option mode 'adhoc'
  option network 'wif0'
  option bssid '<%= @node.fetch('wifi_bssid') %>'
  option ssid '<%= @node.fetch('wifi_ssid') %>'
