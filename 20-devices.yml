# all variables explained
# profile: this is a specific profile,
#     globals: inherited from 10-globals.yml
#     default-packages: inherited from packages (at the moment there are no categories like tiny,medium,big)
#     profile: openwrt profile base
#     platform: architecture of the device
#     platform_type: more detail about architecture of the device (right now looks redundant)
#     filebase: specifies what template directory are you going to insert in the specific device
#     wifi_txpower: here we can specify for example maximum transmission power for this known device

# at the moment we only have one set of packages
regular-packages: &regular-packages
  # break string in multilines -> src https://stackoverflow.com/questions/3790454/in-yaml-how-do-i-break-a-string-over-multiple-lines
  packages: >-
    bmx6-json
    bmx6-sms
    bmx6-uci-config
    bmx6-table
    luci
    luci-ssl
    luci-app-bmx6
    tcpdump-mini
    iperf3
    netperf
    ip
    iwinfo
    netcat
    mtr

border-packages: &border-packages
  packages: >-
    bmx6-json
    bmx6-sms
    bmx6-uci-config
    bmx6-table
    luci
    luci-ssl
    luci-app-bmx6
    tcpdump-mini
    iperf3
    netperf
    ip
    iwinfo
    netcat
    mtr
    bird4
    bird4-uci
    birdc4
    luci-app-bird4

ubnt-nano-m-xw: &ubnt-nano-m-xw
  <<: *globals
  profile: ubnt-nano-m-xw
  platform: ar71xx
  platform_type: generic
  wifi_path: 'platform/ar934x_wmac'

devices:

  # TODO check
  regular-x86_64: &regular-x86_64
    <<: *globals
    <<: *regular-packages
    profile: Generic
    platform: x86
    platform_type: 64
    bmx6_main_iface: 'mesh_12'
    filebase: 'files/template__regular-x86_64'

  regular-ubnt-nano-m: &regular-ubnt-nano-m
    <<: *globals
    <<: *regular-packages
    profile: ubnt-nano-m
    platform: ar71xx
    platform_type: generic
    wifi_path: 'pci0000:00/0000:00:00.0'
    filebase: 'files/template__regular-ubnt-nano-m'

  regular-ubnt-nano-m-xw: &regular-ubnt-nano-m-xw
    <<: *globals
    <<: *regular-packages
    profile: ubnt-nano-m-xw
    platform: ar71xx
    platform_type: generic
    filebase: 'files/template__regular-ubnt-nano-m-xw'

  regular-ubnt-loco-m-xw: &regular-ubnt-loco-m-xw
    <<: *globals
    <<: *regular-packages
    profile: ubnt-loco-m-xw
    platform: ar71xx
    platform_type: generic
    wifi_path: 'platform/ar934x_wmac'
    filebase: 'files/template__regular-ubnt-loco-m-xw'
    # wifi_txpower: 22 # its max value

  border-ubnt-nano-m-xw: &border-ubnt-nano-m-xw
    <<: *ubnt-nano-m-xw
    <<: *border-packages
    filebase: 'files/template__border-ubnt-nano-m-xw'

  regular-ubnt-nano-m-xw: &regular-ubnt-nano-m-xw
    <<: *ubnt-nano-m-xw
    <<: *regular-packages
    filebase: 'files/template__regular-ubnt-nano-m-xw'
